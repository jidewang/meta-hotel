(function(){var t={2793:function(t,e,i){"use strict";var n=i(5130),r=i(6768);function o(t,e){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(i)}var s=i(1241);const a={},l=(0,s.A)(a,[["render",o]]);var c=l,d=i(973),h=i(144),p=i(8776),u=i(2951),m=i(9736),f=i(5533),v=i(2439),y=i(3191),x=i(9294),w=i(7669),g=(i(7852),i(2146),i(6109),i(452),i(881),i(1540),i(5764),i(4968));class C{constructor(t=10,e=300,i=15,n=10,r=!0){let o=new p.Tap;const s=o.load("./textures/cloud/cloud1.jfif"),a=o.load("./textures/cloud/cloud2.jfif"),l=o.load("./textures/cloud/cloud3.jpg");let c=new p.RoJ({map:a,color:16777215,alphaMap:s,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1}),d=new p.RoJ({map:l,color:16777215,alphaMap:a,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1}),h=new p.RoJ({map:s,color:16777215,alphaMap:l,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1});this.materials=[c,d,h],this.mesh=new p.YJl;for(let u=0;u<e;u++){let e=Math.floor(3*Math.random()),r=this.materials[e],o=new p.kxk(r),s=Math.random()*i;o.scale.set(s,s,s);let a=2*(Math.random()-.5)*n,l=Math.random()*(t/2)+t,c=2*(Math.random()-.5)*n;o.position.set(a,l,c),this.mesh.add(o)}r&&this.animate()}animate(){g.Ay.to(this.mesh.rotation,{duration:120,repeat:-1,y:2*Math.PI})}}class k{constructor(t=20,e=100,i=400,n=100,r=!0){this.height=t,this.num=e,this.size=i,this.scale=n,this.autoRotate=r;let o=new p.Tap;const s=o.load("./textures/cloud/cloud1.jfif"),a=o.load("./textures/cloud/cloud2.jfif"),l=o.load("./textures/cloud/cloud3.jpg");let c=[],d=new p.BH$({map:s,color:16777215,alphaMap:a,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1,size:.2*i}),h=new p.BH$({map:a,color:16777215,alphaMap:l,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1,size:.5*i}),u=new p.BH$({map:l,color:16777215,alphaMap:s,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1,size:.8*i}),m=new p.BH$({map:a,color:16777215,alphaMap:s,transparent:!0,blending:p.EZo,depthWrite:!1,depthTest:!1,size:1*i});c.push(d,h,u,m),this.mesh=new p.YJl;for(let f=0;f<c.length;f++){let t=c[f],e=this.generateGeometry(this.num),i=new p.ONl(e,t);this.mesh.add(i)}r&&this.animate()}generateGeometry(t=300){const e=[];for(let n=0;n<t;n++){let t=2*(Math.random()-.5)*this.scale,i=Math.random()*(this.height/2)+this.height,n=2*(Math.random()-.5)*this.scale;e.push(t,i,n)}const i=new p.LoY;return i.setAttribute("position",new p.qtW(e,3)),i}animate(){let t=1;this.mesh.traverse((e=>{let i=40*t;e instanceof p.ONl&&g.Ay.to(e.rotation,{duration:i,repeat:-1,y:2*Math.PI}),t++}))}}var b=i(6086);class S{constructor(t=1e3){this.waterGeometry=new p.jAX(t,128),this.water=new b.E(this.waterGeometry,{textureWidth:1024,textureHeight:1024,color:580586,flowDirection:new p.I9Y(1,1),scale:100}),this.water.position.y=-5,this.water.rotation.x=-Math.PI/2,this.mesh=this.water,this.water.renderOrder=-1,this.water.material.fragmentShader=this.water.material.fragmentShader.replace("gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\n        gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n        gl_FragColor = mix( gl_FragColor, vec4( 0.05, 0.3, 0.7, 1.0 ), vToEye.z*0.0005+0.5 );\n        \n        ")}}var P=i(9079),M=(i(6328),i(434));class z{constructor(t,e,i){this.eventPositionList=[],this.worldOctree=new P.x,this.worldOctree.fromGraphNode(t),this.playerCollider=new M.w(new p.Pq0(0,.35,0),new p.Pq0(0,1.35,0),.35);const n=new v.B;this.mixer=null,this.actions={},this.activeAction=null,n.load("./model/RobotExpressive.glb",(t=>{this.robot=t.scene,this.robot.scale.set(.5,.5,.5),this.robot.position.set(0,-.88,0),this.capsule.add(this.robot),this.mixer=new p.Iw4(this.robot);for(let e=0;e<t.animations.length;e++){let i=t.animations[e].name;this.actions[i]=this.mixer.clipAction(t.animations[e]),"Idle"==i||"Walking"==i||"Running"==i?(this.actions[i].clampWhenFinished=!1,this.actions[i].loop=p.aMy):(this.actions[i].clampWhenFinished=!0,this.actions[i].loop=p.G3T)}this.activeAction=this.actions["Idle"],this.activeAction.play(),console.log(this.actions)})),this.capsule=new p.B69,this.capsule.position.set(0,.85,0);const r=new p.ubm(70,window.innerWidth/window.innerHeight,.001,1e3);e.position.set(0,2,-5),e.lookAt(this.capsule.position),r.position.set(0,2,5),r.lookAt(this.capsule.position),this.capsuleBodyControl=new p.B69,this.capsuleBodyControl.add(e),this.capsuleBodyControl.add(r),this.capsule.add(this.capsuleBodyControl),i.add(this.capsule),this.gravity=-9.8,this.playerVelocity=new p.Pq0(0,0,0),this.playerDirection=new p.Pq0(0,0,0),this.keyStates={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1,Space:!1,isDown:!1},this.playerOnFloor=!1,document.addEventListener("keydown",(t=>{this.keyStates[t.code]=!0,this.keyStates.isDown=!0}),!1),document.addEventListener("keyup",(t=>{this.keyStates[t.code]=!1,this.keyStates.isDown=!1,"KeyV"===t.code&&(this.activeCamera=this.activeCamera===e?r:e),"KeyT"===t.code&&this.fadeToAction("Wave")}),!1),document.addEventListener("mousedown",(t=>{document.body.requestPointerLock()}),!1),window.addEventListener("mousemove",(t=>{this.capsule.rotation.y-=.003*t.movementX,this.capsuleBodyControl.rotation.x+=.003*t.movementY,this.capsuleBodyControl.rotation.x>Math.PI/8?this.capsuleBodyControl.rotation.x=Math.PI/8:this.capsuleBodyControl.rotation.x<-Math.PI/8&&(this.capsuleBodyControl.rotation.x=-Math.PI/8)}),!1)}updatePlayer(t){let e=-.25;this.playerOnFloor?(this.playerVelocity.y=0,this.keyStates.isDown||this.playerVelocity.addScaledVector(this.playerVelocity,e)):this.playerVelocity.y+=this.gravity*t;const i=this.playerVelocity.clone().multiplyScalar(t);this.playerCollider.translate(i),this.playerCollider.getCenter(this.capsule.position),this.playerCollisions(),Math.abs(this.playerVelocity.x)+Math.abs(this.playerVelocity.z)>.1&&Math.abs(this.playerVelocity.x)+Math.abs(this.playerVelocity.z)<=3?this.fadeToAction("Walking"):Math.abs(this.playerVelocity.x)+Math.abs(this.playerVelocity.z)>3?this.fadeToAction("Running"):this.fadeToAction("Idle")}playerCollisions(){const t=this.worldOctree.capsuleIntersect(this.playerCollider);this.playerOnFloor=!1,t&&(this.playerOnFloor=t.normal.y>0,this.playerCollider.translate(t.normal.multiplyScalar(t.depth)))}resetPlayer(){this.capsule.position.y<-20&&(this.playerCollider.start.set(0,2.35,0),this.playerCollider.end.set(0,3.35,0),this.playerCollider.radius=.35,this.playerVelocity.set(0,0,0),this.playerDirection.set(0,0,0))}fadeToAction(t){this.prevAction=this.activeAction,this.activeAction=this.actions[t],this.prevAction!=this.activeAction&&(this.prevAction.fadeOut(.3),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(.3).play(),this.mixer.addEventListener("finished",(t=>{this.prevAction=activeAction,this.activeAction=this.actions["Idle"],this.prevAction.fadeOut(.3),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(.3).play()})))}controlPlayer(t){if(this.keyStates["KeyW"]){this.playerDirection.z=1;const e=new p.Pq0(0,0,0);this.capsule.getWorldDirection(e),this.playerVelocity.x*this.playerVelocity.x+this.playerVelocity.z*this.playerVelocity.z<=200&&this.playerVelocity.add(e.multiplyScalar(5*t))}if(this.keyStates["KeyS"]){this.playerDirection.z=1;const e=new p.Pq0(0,0,0);this.capsule.getWorldDirection(e),this.playerVelocity.add(e.multiplyScalar(-t))}if(this.keyStates["KeyA"]){this.playerDirection.x=1;const e=new p.Pq0(0,0,0);this.capsule.getWorldDirection(e),e.cross(this.capsule.up),this.playerVelocity.add(e.multiplyScalar(-t))}if(this.keyStates["KeyD"]){this.playerDirection.x=1;const e=new p.Pq0(0,0,0);this.capsule.getWorldDirection(e),e.cross(this.capsule.up),this.playerVelocity.add(e.multiplyScalar(t))}this.keyStates["Space"]&&(this.playerVelocity.y=5)}update(t){this.controlPlayer(t),this.updatePlayer(t),this.resetPlayer(),this.mixer&&this.mixer.update(t),this.emitPositionEvent()}emitPositionEvent(){this.eventPositionList.forEach(((t,e)=>{const i=this.capsule.position.distanceToSquared(t.position);i<t.radius*t.radius&&0==t.isInner&&(t.isInner=!0,t.callback&&t.callback(t)),i>=t.radius*t.radius&&1==t.isInner&&(t.isInner=!1,t.outCallback&&t.outCallback(t))}))}onPosition(t,e,i,n=2){t=t.clone(),this.eventPositionList.push({position:t,callback:e,outCallback:i,isInner:!1,radius:n})}}class A{constructor(t,e=new p.I9Y(1,1),i=new p.Pq0(0,0,0)){this.video=document.createElement("video"),this.video.src=t,this.video.muted=!0,this.video.loop=!0,this.video.play();const n=new p.Nv2(this.video),r=new p.bdM(e.x,e.y,1,1),o=new p.V9B({color:16777215,side:p.$EB,transparent:!0,blending:p.EZo,depthWrite:!1,map:n,alphaMap:n});this.mesh=new p.eaF(r,o),this.mesh.position.copy(i)}}class E{constructor(t,e=new p.Pq0(0,0,0),i=1){let n="./video/zp2.mp4";this.video=document.createElement("video"),this.video.src=n,this.video.muted=!0,this.video.loop=!0,this.video.play();const r=new p.Nv2(this.video);r.repeat.set(9/16,1),r.offset.set(.21875,0),this.gltfLoader("./model/lightCircle.glb").then((n=>{this.mesh=n.scene.children[0];n.scene.children[0].geometry;this.mesh.material=new p.V9B({color:16777215,side:p.$EB,transparent:!0,blending:p.EZo,depthWrite:!1,map:r,alphaMap:r}),this.mesh.position.copy(e),this.mesh.scale.set(i,1.5*i,i),t.add(this.mesh)}))}gltfLoader(t){const e=new v.B,i=new f.Z;return i.setDecoderPath("./draco/gltf/"),i.setDecoderConfig({type:"js"}),i.preload(),e.setDRACOLoader(i),new Promise(((i,n)=>{e.load(t,(t=>{i(t)}))}))}}class T{constructor(t,e="helloworld",i=new p.Pq0(0,0,0),n=new p.O9p(0,0,0)){const r=document.createElement("canvas");r.width=1024,r.height=1024;const o=r.getContext("2d");this.context=o;var s=new Image;s.src="./textures/frame/frame2.png",s.onload=()=>{o.drawImage(s,0,0,1024,1024),o.textAlign="center",o.textBaseline="middle",o.font="bold 100px Arial",o.fillStyle="rgba(0,255,255,1)",o.fillText(e,r.width/2,r.height/2);let a=new p.GOR(r);const l=new p.bdM(2,2,1,1),c=new p.V9B({map:a,alphaMap:a,color:16777215,side:p.$EB,transparent:!0,blending:p.EZo,depthWrite:!1});this.mesh=new p.eaF(l,c),this.mesh.position.copy(i),this.mesh.rotation.copy(n),t.add(this.mesh)}}}class L{constructor(t,e="helloworld",i=new p.Pq0(0,0,0),n=new p.O9p(0,0,0)){this.text=e;const r=document.createElement("canvas");this.canvas=r,r.width=1024,r.height=1024;const o=document.createElement("video");this.video=o,o.src="./video/chatFrame.mp4",o.muted=!0,o.loop=!0,o.play();const s=r.getContext("2d");this.context=s,this.texture=new p.GOR(r);const a=new p.bdM(2,2,1,1);this.planeMaterial=new p.V9B({map:this.texture,alphaMap:this.texture,color:16777215,side:p.$EB,transparent:!0,blending:p.EZo,depthWrite:!1}),this.mesh=new p.eaF(a,this.planeMaterial),this.mesh.position.copy(i),this.mesh.rotation.copy(n),t.add(this.mesh)}drawVideoText(t){let e=this.context;e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.video,0,0,1024,1024),e.textAlign="center",e.textBaseline="middle",e.font="bold 100px Arial",e.fillStyle="rgba(0,255,255,1)",e.fillText(t,this.canvas.width/2,this.canvas.height/2),this.texture.needsUpdate=!0,this.planeMaterial.needsUpdate=!0}update(t){this.drawVideoText(this.text)}}i(416);var V=i(4389),O=i.n(V);class D{constructor(t,e=new p.Pq0(-4.9,1.8,25.1),i=1){this.camera=t,this.spriteMaterial=new p.BKk({uniforms:{rotation:{value:0},center:{value:new p.I9Y(.5,.5)},iTime:{value:0},iResolution:{value:new p.I9Y(1e3,1e3)},iMouse:{value:new p.I9Y(0,0)},uFrequency:{value:0}},vertexShader:"\n      uniform float rotation;\n      uniform vec2 center;\n      varying vec2 vUv;\n      void main() {\n          vUv = uv;\n          vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n          vec2 scale;\n          scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n          scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n          scale *= - mvPosition.z;\n          \n          vec2 alignedPosition = -( position.xy - ( center - vec2( 0.5 ) ) ) * scale/mvPosition.z;\n          vec2 rotatedPosition;\n          rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n          rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n          mvPosition.xy += rotatedPosition;\n          gl_Position = projectionMatrix * mvPosition;\n          gl_Position.z = -5.0;\n\n          \n      }\n      ",fragmentShader:O(),transparent:!0,blending:p.EZo,depthWrite:!1,side:p.$EB}),this.sprite=new p.kxk(this.spriteMaterial),console.log(this.sprite.renderOrder),this.sprite.renderOrder=1,this.sprite.position.copy(e),this.sprite.scale.set(i,i,i),this.mesh=this.sprite,this.listener=new p.Pf$,this.sound=new p.xZx(this.listener),this.audioLoader=new p.Am1,this.audioLoader.load("./audio/gnzw.mp3",(t=>{this.sound.setBuffer(t),this.sound.setRefDistance(10),this.sound.setLoop(!0),this.sound.play()})),this.mesh.add(this.sound),this.analyser=new p.CwR(this.sound,32)}update(t){let e=this.camera.localToWorld(new p.Pq0(0,0,0)),i=e.distanceToSquared(this.mesh.position);this.sound.setVolume(1/i*200);let n=this.analyser.getAverageFrequency();this.spriteMaterial.uniforms.uFrequency.value=n,this.spriteMaterial.uniforms.iTime.value+=t}}class I{constructor(t){this.mixers=[],this.actions=[],this.textVideoArrays=[],this.clock=new p.zD7,this.domElement=document.querySelector(t),this.width=this.domElement.clientWidth,this.height=this.domElement.clientHeight,this.updateMeshArr=[],this.init()}init(){this.initScene(),this.initCamera(),this.initRenderer(),this.initEffect(),this.render(),console.log(this.renderer.info)}initScene(){this.scene=new p.Z58}initCamera(){this.camera=new p.ubm(45,this.width/this.height,1e-6,1e4),this.camera.position.set(0,10,50),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()}initRenderer(){this.renderer=new p.JeP({logarithmicDepthBuffer:!0,antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.outputEncoding=p.S2Q,this.renderer.physicallyCorrectLights=!0,this.renderer.toneMapping=p.FV,this.renderer.toneMappingExposure=.75,this.renderer.sortObjects=!0,this.domElement.appendChild(this.renderer.domElement)}initControl(){this.control=new u.N(this.camera,this.renderer.domElement)}render(){let t=this.clock.getDelta();for(let e=0;e<this.mixers.length;e++)this.mixers[e].update(.2*t);if(this.control&&this.control.update(),this.physics&&this.physics.update(t),this.textVideoArrays.length>0)for(let e=0;e<this.textVideoArrays.length;e++)this.textVideoArrays[e].update(t);if(this.updateMeshArr.length>0)for(let e=0;e<this.updateMeshArr.length;e++)this.updateMeshArr[e].update(t);this.effectComposer.render(),requestAnimationFrame(this.render.bind(this))}gltfLoader(t){const e=new v.B,i=new f.Z;return i.setDecoderPath("./draco/gltf/"),i.setDecoderConfig({type:"js"}),i.preload(),e.setDRACOLoader(i),new Promise(((i,n)=>{e.load(t,(t=>{i(t)}))}))}fbxLoader(t){const e=new y.w;return new Promise(((i,n)=>{e.load(t,(t=>{i(t)}))}))}hdrLoader(t){const e=new m.Y;return new Promise(((i,n)=>{e.load(t,(t=>{i(t)}))}))}setBg(t){this.hdrLoader(t).then((t=>{t.mapping=p.wfO,t.anisotropy=16,t.format=p.GWd,this.scene.background=t,this.scene.environment=t}))}setLight(){this.ambientLight=new p.$p8(16777215,.2),this.scene.add(this.ambientLight);const t=new p.ZyN(16777215,.1);t.position.set(0,10,10);const e=new p.ZyN(16777215,.1);e.position.set(0,10,-10);const i=new p.ZyN(16777215,.6);i.position.set(10,10,10),t.castShadow=!0,e.castShadow=!0,i.castShadow=!0,t.shadow.mapSize.width=10240,t.shadow.mapSize.height=10240,e.shadow.mapSize.width=10240,e.shadow.mapSize.height=10240,i.shadow.mapSize.width=10240,i.shadow.mapSize.height=10240,this.scene.add(t,e,i)}initEffect(){this.effectComposer=new x.s0(this.renderer),this.effectComposer.setSize(window.innerWidth,window.innerHeight);const t=new w.A(this.scene,this.camera);this.effectComposer.addPass(t)}addClouds(){let t=new C;this.scene.add(t.mesh)}addCloudsPlus(){let t=new k;this.scene.add(t.mesh)}addOcean(){let t=new S;this.scene.add(t.mesh)}addAxis(){let t=new p.IzY(20);this.scene.add(t)}addPhysics(t){return this.physics=new z(t,this.camera,this.scene),this.physics}addVideoPlane(t,e,i){let n=new A(t,e,i);return this.scene.add(n.mesh),n}addLightCircle(t,e){let i=new E(this.scene,t,e);return i}addCanvasPlane(t,e,i){let n=new T(this.scene,t,e,i);return n}addTextVideo(t,e,i){let n=new L(this.scene,t,e,i);return this.textVideoArrays.push(n),n}addFireSprite(t,e){let i=new D(this.camera,t,e);return this.scene.add(i.mesh),this.updateMeshArr.push(i),i}}var B=i(595);new B.A;const F=(0,r.Lk)("div",{class:"canvas-container"},null,-1),W=[F];var _={__name:"HomeView",setup(t){let e=(0,h.KR)(null);const i=()=>{let t=window.innerWidth/1920;e.value.style.transform=`scale(${t})`};return(0,r.sV)((()=>{i(),window.addEventListener("resize",i)})),(0,r.sV)((()=>{document.querySelector(".canvas-container");let t=new I(".canvas-container");t.setBg("./assets/textures/sky11.hdr"),t.addCloudsPlus(),t.addOcean(),t.gltfLoader("./model/city/metaScene03.glb").then((e=>{let i=new p.YJl;i.position.copy(e.scene.children[0].position),e.scene.add(i),e.scene.traverse((t=>{t.isMesh&&t.material&&-1!=t.material.name.indexOf("KB3D_DLA_ConcreteRiverRock")&&(i.add(t.clone()),t.visible=!1),t.isMesh&&t.material&&-1!=t.material.name.indexOf("KB3D_DLA_ConcreteScreedTan")&&(i.add(t.clone()),t.visible=!1),t.isMesh&&t.material&&-1!=t.material.name.indexOf("KB3D_DLA_ConcretePittedGrayLight")&&(i.add(t.clone()),t.visible=!1)})),t.addPhysics(i),t.scene.add(e.scene);let n=t.addVideoPlane("./video/arrow.mp4",new p.I9Y(2,2));n.mesh.position.set(-1.5,3,2),n.mesh.rotation.z=-Math.PI/2;let r=new p.Pq0(-3,-.3,15),o=t.addLightCircle(r),s=null;t.physics.onPosition(r,(e=>{console.log("触发进入光圈"),o.mesh.visible=!1;let i=new p.Pq0(-3,1.3,18),n=new p.O9p(0,Math.PI,0);t.addTextVideo("恭喜到达指定位置",i,n);s||(s=t.addFireSprite())}),(t=>{console.log("触发离开光圈"),o.mesh.visible=!0}))})),t.setLight()})),(t,i)=>((0,r.uX)(),(0,r.CE)("div",{class:"home",ref_key:"screenDom",ref:e},W,512))}};const q=_;var j=q;const R=[{path:"/",name:"home",component:j},{path:"/about",name:"about",component:()=>i.e(594).then(i.bind(i,3223))}],G=(0,d.aE)({history:(0,d.Bt)(),routes:R});var Z=G,N=i(782),K=(0,N.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(c).use(K).use(Z).mount("#app")},4389:function(t){t.exports="//\r\n// Description : Array and textureless GLSL 2D/3D/4D simplex \r\n//\t\t\t\t\t\t\t noise functions.\r\n//\t\t\tAuthor : Ian McEwan, Ashima Arts.\r\n//\tMaintainer : ijm\r\n//\t\t Lastmod : 20110822 (ijm)\r\n//\t\t License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//\t\t\t\t\t\t\t Distributed under the MIT License. See LICENSE file.\r\n//\t\t\t\t\t\t\t https://github.com/ashima/webgl-noise\r\n// \r\n\r\nuniform vec2 iResolution;\r\nuniform float iTime;\r\nvarying vec2 vUv;\r\nuniform vec2 iMouse;\r\nuniform float uFrequency;\r\n\r\nvec3 mod289(vec3 x) {\r\n\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 mod289(vec4 x) {\r\n\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 permute(vec4 x) {\r\n\t\t return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r)\r\n{\r\n\treturn 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat snoise(vec3 v)\r\n\t{ \r\n\tconst vec2\tC = vec2(1.0/6.0, 1.0/3.0) ;\r\n\tconst vec4\tD = vec4(0.0, 0.5, 1.0, 2.0);\r\n\r\n// First corner\r\n\tvec3 i\t= floor(v + dot(v, C.yyy) );\r\n\tvec3 x0 =\t v - i + dot(i, C.xxx) ;\r\n\r\n// Other corners\r\n\tvec3 g = step(x0.yzx, x0.xyz);\r\n\tvec3 l = 1.0 - g;\r\n\tvec3 i1 = min( g.xyz, l.zxy );\r\n\tvec3 i2 = max( g.xyz, l.zxy );\r\n\r\n\t//\t x0 = x0 - 0.0 + 0.0 * C.xxx;\r\n\t//\t x1 = x0 - i1\t+ 1.0 * C.xxx;\r\n\t//\t x2 = x0 - i2\t+ 2.0 * C.xxx;\r\n\t//\t x3 = x0 - 1.0 + 3.0 * C.xxx;\r\n\tvec3 x1 = x0 - i1 + C.xxx;\r\n\tvec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\r\n\tvec3 x3 = x0 - D.yyy;\t\t\t// -1.0+3.0*C.x = -0.5 = -D.y\r\n\r\n// Permutations\r\n\ti = mod289(i); \r\n\tvec4 p = permute( permute( permute( \r\n\t\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\r\n\t\t\t\t\t + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \r\n\t\t\t\t\t + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\r\n\r\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\r\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\r\n\tfloat n_ = 0.142857142857; // 1.0/7.0\r\n\tvec3\tns = n_ * D.wyz - D.xzx;\r\n\r\n\tvec4 j = p - 49.0 * floor(p * ns.z * ns.z);\t//\tmod(p,7*7)\r\n\r\n\tvec4 x_ = floor(j * ns.z);\r\n\tvec4 y_ = floor(j - 7.0 * x_ );\t\t// mod(j,N)\r\n\r\n\tvec4 x = x_ *ns.x + ns.yyyy;\r\n\tvec4 y = y_ *ns.x + ns.yyyy;\r\n\tvec4 h = 1.0 - abs(x) - abs(y);\r\n\r\n\tvec4 b0 = vec4( x.xy, y.xy );\r\n\tvec4 b1 = vec4( x.zw, y.zw );\r\n\r\n\t//vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\r\n\t//vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\r\n\tvec4 s0 = floor(b0)*2.0 + 1.0;\r\n\tvec4 s1 = floor(b1)*2.0 + 1.0;\r\n\tvec4 sh = -step(h, vec4(0.0));\r\n\r\n\tvec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\r\n\tvec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\r\n\r\n\tvec3 p0 = vec3(a0.xy,h.x);\r\n\tvec3 p1 = vec3(a0.zw,h.y);\r\n\tvec3 p2 = vec3(a1.xy,h.z);\r\n\tvec3 p3 = vec3(a1.zw,h.w);\r\n\r\n//Normalise gradients\r\n\t//vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n\tvec4 norm = inversesqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n\tp0 *= norm.x;\r\n\tp1 *= norm.y;\r\n\tp2 *= norm.z;\r\n\tp3 *= norm.w;\r\n\r\n// Mix final noise value\r\n\tvec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\r\n\tm = m * m;\r\n\treturn 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\r\n\t}\r\n\r\n//////////////////////////////////////////////////////////////\r\n\r\n// PRNG\r\n// From https://www.shadertoy.com/view/4djSRW\r\nfloat prng(in vec2 seed) {\r\n\tseed = fract (seed * vec2 (5.3983, 5.4427));\r\n\tseed += dot (seed.yx, seed.xy + vec2 (21.5351, 14.3137));\r\n\treturn fract (seed.x * seed.y * 95.4337);\r\n}\r\n\r\n//////////////////////////////////////////////////////////////\r\n\r\nfloat PI = 3.1415926535897932384626433832795;\r\n\r\nfloat noiseStack(vec3 pos,int octaves,float falloff){\r\n\tfloat noise = snoise(vec3(pos));\r\n\tfloat off = 1.0;\r\n\tif (octaves>1) {\r\n\t\tpos *= 2.0;\r\n\t\toff *= falloff;\r\n\t\tnoise = (1.0-off)*noise + off*snoise(vec3(pos));\r\n\t}\r\n\tif (octaves>2) {\r\n\t\tpos *= 2.0;\r\n\t\toff *= falloff;\r\n\t\tnoise = (1.0-off)*noise + off*snoise(vec3(pos));\r\n\t}\r\n\tif (octaves>3) {\r\n\t\tpos *= 2.0;\r\n\t\toff *= falloff;\r\n\t\tnoise = (1.0-off)*noise + off*snoise(vec3(pos));\r\n\t}\r\n\treturn (1.0+noise)/2.0;\r\n}\r\n\r\nvec2 noiseStackUV(vec3 pos,int octaves,float falloff,float diff){\r\n\tfloat displaceA = noiseStack(pos,octaves,falloff);\r\n\tfloat displaceB = noiseStack(pos+vec3(3984.293,423.21,5235.19),octaves,falloff);\r\n\treturn vec2(displaceA,displaceB);\r\n}\r\n\r\nvoid main(  ) {\r\n    float time = iTime;\r\n    vec2 resolution = iResolution.xy;\r\n\tvec2 drag = iMouse.xy;\r\n\tvec2 offset = iMouse.xy;\r\n\t\t//\r\n\tfloat xpart = vUv.x*1000.0/resolution.x;\r\n\tfloat ypart = vUv.y*1000.0/resolution.y;\r\n\t//\r\n\tfloat clip = 210.0;\r\n\r\n    float fireStrength =1.0 - uFrequency/100.0;\r\n\tfloat ypartClip = vUv.y*1000.0/clip * fireStrength;\r\n\tfloat ypartClippedFalloff = clamp(2.0-ypartClip,0.0,1.0);\r\n\tfloat ypartClipped = min(ypartClip,1.0);\r\n\tfloat ypartClippedn = 1.0-ypartClipped;\r\n\t//\r\n\tfloat xfuel = 1.0-abs(2.0*xpart-1.0);//pow(1.0-abs(2.0*xpart-1.0),0.5);\r\n\t//\r\n\tfloat timeSpeed = 0.5;\r\n\tfloat realTime = timeSpeed*time;\r\n\t//\r\n\tvec2 coordScaled = 0.01*gl_FragCoord.xy - 0.02*vec2(offset.x,0.0);\r\n\tvec3 position = vec3(coordScaled,0.0) + vec3(1223.0,6434.0,8425.0);\r\n\tvec3 flow = vec3(4.1*(0.5-xpart)*pow(ypartClippedn,4.0),-2.0*xfuel*pow(ypartClippedn,64.0),0.0);\r\n\tvec3 timing = realTime*vec3(0.0,-1.7,1.1) + flow;\r\n\t//\r\n\tvec3 displacePos = vec3(1.0,0.5,1.0)*2.4*position+realTime*vec3(0.01,-0.7,1.3);\r\n\tvec3 displace3 = vec3(noiseStackUV(displacePos,2,0.4,0.1),0.0);\r\n\t//\r\n\tvec3 noiseCoord = (vec3(2.0,1.0,1.0)*position+timing+0.4*displace3)/1.0;\r\n\tfloat noise = noiseStack(noiseCoord,3,0.4);\r\n\t//\r\n\tfloat flames = pow(ypartClipped,0.3*xfuel)*pow(noise,0.3*xfuel);\r\n\t//\r\n\tfloat f = ypartClippedFalloff*pow(1.0-flames*flames*flames,8.0);\r\n\tfloat fff = f*f*f;\r\n\tvec3 fire = 1.5*vec3(f, fff, fff*fff);\r\n\t//\r\n\t// smoke\r\n\tfloat smokeNoise = 0.5+snoise(0.4*position+timing*vec3(1.0,1.0,0.2))/2.0;\r\n\tvec3 smoke = vec3(0.3*pow(xfuel,3.0)*pow(ypart,2.0)*(smokeNoise+0.4*(1.0-noise)));\r\n\t//\r\n\t// sparks\r\n\tfloat sparkGridSize = 30.0;\r\n\tvec2 sparkCoord = gl_FragCoord.xy - vec2(2.0*offset.x,190.0*realTime);\r\n\tsparkCoord -= 30.0*noiseStackUV(0.01*vec3(sparkCoord,30.0*time),1,0.4,0.1);\r\n\tsparkCoord += 100.0*flow.xy;\r\n\tif (mod(sparkCoord.y/sparkGridSize,2.0)<1.0) sparkCoord.x += 0.5*sparkGridSize;\r\n\tvec2 sparkGridIndex = vec2(floor(sparkCoord/sparkGridSize));\r\n\tfloat sparkRandom = prng(sparkGridIndex);\r\n\tfloat sparkLife = min(10.0*(1.0-min((sparkGridIndex.y+(190.0*realTime/sparkGridSize))/(24.0-20.0*sparkRandom),1.0)),1.0);\r\n\tvec3 sparks = vec3(0.0);\r\n\tif (sparkLife>0.0) {\r\n\t\tfloat sparkSize = xfuel*xfuel*sparkRandom*0.08;\r\n\t\tfloat sparkRadians = 999.0*sparkRandom*2.0*PI + 2.0*time;\r\n\t\tvec2 sparkCircular = vec2(sin(sparkRadians),cos(sparkRadians));\r\n\t\tvec2 sparkOffset = (0.5-sparkSize)*sparkGridSize*sparkCircular;\r\n\t\tvec2 sparkModulus = mod(sparkCoord+sparkOffset,sparkGridSize) - 0.5*vec2(sparkGridSize);\r\n\t\tfloat sparkLength = length(sparkModulus);\r\n\t\tfloat sparksGray = max(0.0, 1.0 - sparkLength/(sparkSize*sparkGridSize));\r\n\t\tsparks = sparkLife*sparksGray*vec3(1.0,0.3,0.0);\r\n\t}\r\n\t//\r\n\t// gl_FragColor = vec4(max(fire,sparks)+smoke,(1.0-vUv.y));\r\n    gl_FragColor = vec4(max(fire,sparks)+smoke,1.0);\r\n\tgl_FragColor.a = gl_FragColor.r*(1.0-vUv.y);\r\n\r\n}"}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,r,o){if(!n){var s=1/0;for(d=0;d<t.length;d++){n=t[d][0],r=t[d][1],o=t[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[l])}))?n.splice(l--,1):(a=!1,o<s&&(s=o));if(a){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,r,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,n){return i.f[n](t,e),e}),[]))}}(),function(){i.u=function(t){return"js/about.c8c0c4d6.js"}}(),function(){i.miniCssF=function(t){}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="meta-city:";i.l=function(n,r,o,s){if(t[n])t[n].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==e+o){a=h;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+o),a.src=n),t[n]=[r];var p=function(e,i){a.onerror=a.onload=null,clearTimeout(u);var r=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(t){return t(i)})),e)return e(i)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/meta-hotel/"}(),function(){var t={524:0};i.f.j=function(e,n){var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(i,n){r=t[e]=[i,n]}));n.push(r[2]=o);var s=i.p+i.u(e),a=new Error,l=function(n){if(i.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}};i.l(s,l,"chunk-"+e,e)}},i.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,o,s=n[0],a=n[1],l=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var d=l(i)}for(e&&e(n);c<s.length;c++)o=s[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},n=self["webpackChunkmeta_city"]=self["webpackChunkmeta_city"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(2793)}));n=i.O(n)})();
//# sourceMappingURL=app.bda76693.js.map